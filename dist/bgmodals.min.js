angular.module("blakgeek.modals",[]),function(){function a(a,b,c){}function b(){return{scope:{},restrict:"E",transclude:!0,templateUrl:"/templates/bgmAlert.html",controller:a}}angular.module("blakgeek.modals").directive("bgmAlert",b)}(),function(){function a(a,b,c){}function b(){return{scope:{},restrict:"E",transclude:!0,templateUrl:"/templates/bgmConfirm.html",controller:a}}angular.module("blakgeek.modals").directive("bgmConfirm",b)}(),function(){function a(a,b,c,d){var e=a.bgmId||d.getId();a.close=function(){c.$emit("bgm:rejected",e),c.$emit("bgm:close",e)},c.$on("bgm:open",function(a,d){d===e&&(b.addClass("bgm-open"),c.$emit("bgm:mask"))}),c.$on("bgm:close",function(a,d){d===e&&(b.removeClass("bgm-open"),c.$emit("bgm:unmask"))}),c.$on("bgm:closeall",function(a,c){b.removeClass("bgm-open")}),c.$on("bgm:toggle",function(a,c){c===e&&b.toggleClass("bgm-open")})}function b(){return{scope:{title:"@",bgmId:"@"},restrict:"E",transclude:!0,replace:!0,templateUrl:"/templates/bgmModal.html",controller:["$scope","$element","$rootScope","bgModals",a]}}angular.module("blakgeek.modals").directive("bgmModal",b)}(),function(){function a(a,b,c,d){d.$on("bgm:mask",function(a){b.addClass("bgm-modal-masked")}),d.$on("bgm:unmask",function(a){b.removeClass("bgm-modal-masked")}),d.$on("bgm:closeall",function(a){b.removeClass("bgm-modal-masked")})}function b(){return{scope:{},restrict:"E",transclude:!0,replace:!0,templateUrl:"/templates/bgmModals.html",controller:["$scope","$element","$rootScope",a]}}angular.module("blakgeek.modals").directive("bgmModals",b)}(),angular.module("blakgeek.modals").factory("bgModals",["$rootScope","$q",function(a,b){function c(c){return a.$emit("bgm:open",c),k[c]=b.defer(),k[c].promise}function d(b){a.$emit("bgm:close",b)}function e(){a.$emit("bgm:closeall")}function f(a,b){d(a),k[a]&&(k[a].resolve(b),delete k[a])}function g(a,b){d(a),k[a]&&(k[a].reject(b),delete k[a])}function h(){k={}}function i(){return"bgm"+j++}var j=0,k={};return a.$on("bgm:rejected",function(a,b,c){k[b]&&(k[b].reject(c),delete k[b])}),a.$on("bgm:accepted",function(a,b,c){k[b].resolve(c),delete k[b]}),{open:c,close:d,closeAll:e,reject:g,accept:f,getId:i,clear:h}}]),angular.module("blakgeek.modals").run(["$templateCache",function(a){"use strict";a.put("/templates/bgmAlert.html",'<div class="bgm-modal"><header><h2>{{title || staticTitle}}</h2><span ng-click="close()" class="bgm-btn-close"></span></header><main><ng-transclude></ng-transclude></main><footer><button ng-click="close()">{{gotIt}}</button></footer></div>'),a.put("/templates/bgmBody.html","<main><ng-transclude></ng-transclude></main>"),a.put("/templates/bgmButtons.html","<footer><ng-transclude></ng-transclude></footer>"),a.put("/templates/bgmConfirm.html",'<div class="bgm-modal"><header><h2>{{title}}</h2><span ng-click="close()" class="bgm-btn-close"></span></header><main><ng-transclude></ng-transclude></main><footer><button ng-click="reject()">{{nope}}</button> <button ng-click="accept()">{{yep}}</button></footer></div>'),a.put("/templates/bgmModal.html",'<div class="bgm-modal"><header><h2>{{title}}</h2><span ng-click="close()" class="bgm-btn-close"></span></header><main><ng-transclude></ng-transclude></main></div>'),a.put("/templates/bgmModals.html",'<div class="bgm-modals"><ng-transclude></ng-transclude><div class="bgm-mask"></div></div>')}]);